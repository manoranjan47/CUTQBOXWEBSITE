define("@widget/POPUP/popup1-dd74943d.js",["exports"],(function(e){"use strict";function t(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e},o.apply(this,arguments)}const{PropTypes:a}=(global.Core||guac["@wsb/guac-widget-core"]).Maniless;var l={__proto__:null,renderMode:a.string.readOnly,viewDevice:a.string.readOnly,alignmentOption:a.Alignment,websiteId:a.string.readOnly,widgetId:a.string.readOnly,lastPublished:a.string.readOnly,enabled:a.Toggle,popupTitle:a.Text.maxCount(60),popupDescription:a.RichText.maxCount(600),cta:a.CTAButton,popupImage:a.Image,popupDelayEnabled:a.Toggle,popupDelay:a.Text.maxCount(3).regex(/^\d*\.?\d*$/,a.constants.propTypeErrors.INVALID)};const{selectors:{Account:r,Config:i,I18N:p,Page:s,StockPhotos:n,Stores:c,Widget:g,utils:d}}=(global.Core||guac["@wsb/guac-widget-core"]).Maniless;var u={__proto__:null,renderMode:i.renderMode,viewDevice:i.viewDevice,enabled:!1,websiteId:c.Website.key("id"),lastPublished:c.Website.property("lastPublishSuccessUtcDateTime"),alignmentOption:g.layoutProp("alignmentOption"),widgetId:g.id,popupTitle:p.get("defaultTitle"),popupDescription:p.get("defaultDescription"),cta:{enabled:!0,label:p.get("learnMore"),pageId:s.id},popupImage:d.createSelector(n.index(0),r.market,((e,t)=>({image:t&&"en"===t.split("-")[0]?"//img1.wsimg.com/isteam/ip/stock/drew-beamer-3SIXZisims4-unsplash.jpg":e,alt:"",editedAspectRatio:"",height:"",left:"",position:"",rotation:"",shrinkFit:!1,top:"",video:"",width:""}))),popupDelayEnabled:!1,popupDelay:"0"};const b="alignmentOption",m="enabled",w="popupTitle",y="popupDescription",h="cta",P="popupImage",T="popupDelayEnabled",E="popupDelay",{BASE:D}=(global.Core||guac["@wsb/guac-widget-core"]).Maniless.constants.routes,{PropTypes:{DeleteButton:C,Description:I,Image:R}}=(global.Core||guac["@wsb/guac-widget-core"]).Maniless;var v={__proto__:null,mutatorDescription:I,deleteSectionButton:C,popupImage:R};const M="mutatorDescription",{selectors:{I18N:O,Stores:_,utils:{not:f,createSelector:x}}}=(global.Core||guac["@wsb/guac-widget-core"]).Maniless,k=f(_.Widget.option("enabled"));var B={[M]:{description:O.get("description")},[m]:{label:O.get("titleForEnable")},[b]:{hidden:k},[w]:{label:O.get("title"),hidden:k},[y]:{label:O.get("titleForDescription"),hidden:k},[h]:{toggleLabel:O.get("actionButton"),label:O.get("titleForButtonLabel"),buttonLabelLink:(global.Core||guac["@wsb/guac-widget-core"]).Maniless.constants.routes.EDIT_THEME_BUTTONS_PRIMARY,buttonLabelLinkText:O.get("editThemeStyles"),title:null,description:null,hidden:k},[P]:{showRemoveButton:!0,addOrReplaceImage:!0,hidden:k,onlyDeleteSrc:!0,aspectRatio:2.2},[T]:{label:O.get("titleForEnablePopupDelay"),hidden:k},[E]:{label:O.get("titleForDelayPopup"),placeholder:"0",hidden:x(f(_.Widget.option("popupDelayEnabled")),k,((e,t)=>e||t))}};const S=(global.Core||guac["@wsb/guac-widget-core"]).Maniless.Widget;function U(e){let{id:t,cookieName:o,popupDelay:a}=e;if(document.cookie.split(";").find((e=>e.indexOf(o)>=0)))return;const l=document.getElementById(t);setTimeout((()=>{l.style.display="flex"}),1e3*a);const r=document.getElementById(`${t}-close-icon`),i=document.getElementById(`${t}-cta`),p=()=>{const e=new Date;e.setTime(e.getTime()+864e5),document.cookie=[`${o}=true`,`expires=${e.toUTCString()}`,"path=/"].join(";"),l.style.display="none",i&&i.removeEventListener("click",p),r&&r.removeEventListener("click",p)};i&&i.addEventListener("click",p),r&&r.addEventListener("click",p)}const{Bootstrap:L,CTAButton:W}=(global.Core||guac["@wsb/guac-widget-core"]).components,{EDIT:N,PUBLISH:j}=(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes,{TABLET_RENDER_DEVICE:A}=(global.Core||guac["@wsb/guac-widget-core"]).constants.renderDevices,{NEUTRAL:$}=(global.Core||guac["@wsb/guac-widget-core"]).constants.categoryTypes,{DEFAULT:F}=(global.Core||guac["@wsb/guac-widget-core"]).constants.sectionTypes,X=515;class H extends(global.React||guac.react).Component{constructor(){super(...arguments),t(this,"closeModal",(()=>{const{renderMode:e,viewDevice:t,router:o}=this.props;e===N&&t===A&&o.updateRoute({route:(global.Core||guac["@wsb/guac-widget-core"]).Maniless.constants.routes.EDIT_SECTIONS})})),t(this,"getScriptProps",(()=>{const{id:e,websiteId:t,lastPublished:o,popupDelay:a}=this.props;let l=Date.parse(o);l=isNaN(l)?0:l;return{id:e,cookieName:`wam_widgets_popup_closed_${t}_${l}`,popupDelay:a}}))}render(){const{id:e,renderMode:t,alignmentOption:o,popupTitle:a,popupDescription:l,cta:r,popupImage:i}=this.props,p={childrenWrapper:{textAlign:o,padding:"large","> *:not(:last-child)":{marginBottom:"small"}},popup:{modal:{display:t===j?"none":"flex"},body:{padding:0,paddingBottom:0,borderRadius:12,maxWidth:X,"@md":{maxWidth:X},"@sm":{borderRadius:12,maxWidth:X},"@xs-only":{borderRadius:12}},content:{paddingHorizontal:0,borderRadius:12,"@sm":{borderRadius:12,paddingHorizontal:0},"> *:not(:last-child)":{marginBottom:0}},closeIcon:{icon:{borderRadius:"50%",backgroundColor:"neutral",height:"22px",width:"22px",padding:"xxsmall"},container:{position:"absolute",right:0,zIndex:1}},imageBlock:{display:"flex",marginBottom:0,"@md":{height:234}},image:{width:"100%"}}},s=r&&r.enabled&&r.label,n=a||l||s,c=i&&i.image;if(t===j&&!n&&!c)return null;const g=(global.React||guac.react).createElement(L.JS,{key:"popupScript",id:"PopupWidgetScript",script:U.toString(),props:this.getScriptProps()}),d={outputWidth:X,outputHeight:234,...i};return(global.React||guac.react).createElement((global.React||guac.react).Fragment,null,(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Modal.Popup,{id:e,"data-edit-interactive":!0,"data-aid":"POPUP_MODAL",onClose:this.closeModal,styles:p.popup,category:$,section:F,preventShrink:!0},c&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:p.popup.imageBlock},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Image,{isFullWidthMobile:!1,imageData:d,style:p.popup.image})),n&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:p.childrenWrapper},a&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Heading.Middle,{"data-aid":"POPUP_TITLE_RENDERED","data-route":w},a),l&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Text,{richtext:!0,"data-aid":"POPUP_DESCRIPTION_RENDERED","data-route":y},l),s&&(global.React||guac.react).createElement(W,{elementProps:{id:`${e}-cta`},ctaButton:r,onClick:this.closeModal,"data-aid":"CTA_RENDERED","data-route":h}))),t===j&&g)}}t(H,"propTypes",{id:(global.PropTypes||guac["prop-types"]).string,router:(global.PropTypes||guac["prop-types"]).object,websiteId:(global.PropTypes||guac["prop-types"]).string,renderMode:(global.PropTypes||guac["prop-types"]).oneOf(Object.values((global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes)),viewDevice:(global.PropTypes||guac["prop-types"]).oneOf(Object.values((global.Core||guac["@wsb/guac-widget-core"]).constants.renderDevices)),lastPublished:(global.PropTypes||guac["prop-types"]).string,alignmentOption:(global.PropTypes||guac["prop-types"]).oneOf(["left","center","right"]),popupTitle:(global.PropTypes||guac["prop-types"]).string,popupDescription:(global.PropTypes||guac["prop-types"]).string,cta:(global.PropTypes||guac["prop-types"]).shape({enabled:(global.PropTypes||guac["prop-types"]).bool,label:(global.PropTypes||guac["prop-types"]).string,pageId:(global.PropTypes||guac["prop-types"]).string,linkId:(global.PropTypes||guac["prop-types"]).string,linkType:(global.PropTypes||guac["prop-types"]).string,target:(global.PropTypes||guac["prop-types"]).string,url:(global.PropTypes||guac["prop-types"]).string}),popupImage:(global.PropTypes||guac["prop-types"]).object,popupDelay:(global.PropTypes||guac["prop-types"]).string});const{EDIT:V,PREVIEW:z}=(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes,{MOBILE_RENDER_DEVICE:q}=(global.Core||guac["@wsb/guac-widget-core"]).constants.renderDevices;class J extends S{constructor(){super(...arguments),this.id=(global._||guac.lodash).uniqueId("popup-widget")}render(){const{enabled:e,renderMode:t,viewDevice:a,widgetId:l}=this.props;if(!e||t===z)return null;const{Router:r}=(global.Core||guac["@wsb/guac-widget-core"]).Maniless.context,i=(global.React||guac.react).createElement(H,o({},this.props,{id:this.id,renderMode:t}));return t===V?(global.React||guac.react).createElement(r.Consumer,null,(t=>{const{widget:o}=t;return o===l?(global.React||guac.react).cloneElement(i,{key:a===q?`show-${e}`:`show-${e}-${t.widget===l}`,router:t,widgetId:l,viewDevice:a}):null})):i}}t(J,"propTypes",{...(global._||guac.lodash).omit((global.Core||guac["@wsb/guac-widget-core"]).Maniless.Widget.propTypes,"order"),...l}),t(J,"defaultProps",{...(global._||guac.lodash).omit((global.Core||guac["@wsb/guac-widget-core"]).Maniless.Widget.defaultProps,"order"),...u});var Y=(global.Core||guac["@wsb/guac-widget-core"]).Maniless.utils.createMutator({routes:{[D]:[m,P,M,b,w,y,h,T,E]}},{fields:v,defaultProps:B,omitDefaultFields:!0}),Z=(global.Core||guac["@wsb/guac-widget-core"]).Maniless.connect(J,Y);e.Component=Z,e.component="@widget/POPUP/popup1",e.default=Z,e.hooks="@widget/POPUP/hooks",e.id="popup1",e.src="/home/jenkins/workspace/gdcorp-im/guac-widget-popup/build-master/src/layouts/popup1/index.js",e.type="POPUP",Object.defineProperty(e,"__esModule",{value:!0})})),"undefined"!=typeof window&&(window.global=window);
//# sourceMappingURL=popup1-dd74943d.js.map
