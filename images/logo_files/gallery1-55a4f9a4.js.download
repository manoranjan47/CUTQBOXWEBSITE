define("@widget/GALLERY/gallery1-55a4f9a4.js",["exports","~/c/dataAids","~/c/util","@wsb/guac-widget-shared@^1/lib/components/Carousel","~/c/wrapWithDeviceDetection","~/c/CustomArrows","~/c/convertImages"],(function(e,t,a,o,l,r,s){"use strict";class i extends t.a{}t._(i,"defaultProps",t.a.mergeDefaultProps({[t.K.title]:t.t,[t.K.autoplay]:t.b,[t.K.autoplayDelay]:t.c,[t.K.fullBleed]:t.f,[t.K.showthumbnails]:t.s,[t.K.showArrows]:t.d,routes:{[t.r.BASE]:[t.K.remixButton,t.K.title,t.K.fullBleed,t.K.showthumbnails,t.K.showArrows,t.K.autoplay,t.K.autoplayDelay,t.K.galleryImages,t.D]}}));const n=e=>{let{maxWidthCaption:a,captionContainerHeight:o,caption:l}=e;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.FigCaption,{"data-aid":t.e.GALLERY_CAPTION_RENDERED,children:l,richtext:!0,style:{textAlign:"center",maxWidth:a||"",minHeight:o||"",paddingTop:"small",margin:"0 auto"}})};n.propTypes={maxWidthCaption:(global.PropTypes||guac["prop-types"]).string,captionContainerHeight:(global.PropTypes||guac["prop-types"]).string,caption:(global.PropTypes||guac["prop-types"]).string};const g={mobile:{minWidth:200,maxWidth:300,height:210},tablet:{minWidth:400,maxWidth:800,height:600},smallTablet:{minWidth:300,maxWidth:600,height:400}};var c=l.w(class extends(global.React||guac.react).Component{constructor(e){super(e),this.state={arrows:!1,selectedIndex:0,nextSlideIncremental:0},this.updateSelectedIndex=this.updateSelectedIndex.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this),this.nextSlideDebounced=(global._||guac.lodash).debounce((e=>s.h({keyCode:e.keyCode,context:this})),200)}static get propTypes(){return{autoplay:(global.PropTypes||guac["prop-types"]).bool,category:(global.PropTypes||guac["prop-types"]).string,className:(global.PropTypes||guac["prop-types"]).string,device:(global.PropTypes||guac["prop-types"]).string,images:(global.PropTypes||guac["prop-types"]).array,renderAsThumbnail:(global.PropTypes||guac["prop-types"]).bool,section:(global.PropTypes||guac["prop-types"]).string,showthumbnails:(global.PropTypes||guac["prop-types"]).bool,size:(global.PropTypes||guac["prop-types"]).string,currentImageSelected:(global.PropTypes||guac["prop-types"]).string,fullBleed:(global.PropTypes||guac["prop-types"]).bool,showArrows:(global.PropTypes||guac["prop-types"]).bool,autoplayDelay:(global.PropTypes||guac["prop-types"]).string,hasCaption:(global.PropTypes||guac["prop-types"]).bool,enableImageDimension:(global.PropTypes||guac["prop-types"]).bool}}static get defaultProps(){return{category:"neutral",device:"tablet",images:[],autoplay:!1,showArrows:!0}}static getDerivedStateFromProps(e,t){const{images:a=[]}=e,{selectedIndex:o}=t;return o>=a.length?{selectedIndex:0}:null}handleMouseLeave(){this.setState({mouseOnCarousel:!1,arrows:!1})}handleMouseEnter(){this.setState({mouseOnCarousel:!0}),this.handleMouseMove()}handleMouseMove(){this.state.arrows||this.setState({arrows:!0}),clearTimeout(this.timer),this.timer=setTimeout((()=>{this.setState({arrows:!1})}),1e3)}renderFakeCarousel(e){const t={marginVertical:0,marginHorizontal:"xxsmall",display:"inline-block",height:500,width:700},a=e[e.length-1],o=e[0],l=e.length>1?e[1]:o,r="mobile"!==this.props.device?"700px":null,{selectedIndex:i}=this.state;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{color:"highlight"},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:{width:900,overflow:"hidden",margin:"0 auto",whiteSpace:"nowrap"}},(global.React||guac.react).cloneElement(a,{style:(global._||guac.lodash).merge({},t,{margin:"0 5px 0 -605px",opacity:.3})}),(global.React||guac.react).cloneElement(o,{style:t}),(global.React||guac.react).cloneElement(l,{style:(global._||guac.lodash).merge({},t,{opacity:.3})})),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:{width:900,overflow:"hidden",margin:"0 auto"}},(global.React||guac.react).createElement(n,{maxWidthCaption:r,captionContainerHeight:this.props.hasCaption?40:0,caption:e[i].caption||""}),this.props.showthumbnails&&(global.React||guac.react).createElement(s.F,{images:this.props.images,thumbImageDimensions:s.t,baseStyle:{position:"relative"}})))}componentDidUpdate(e){const{currentImageSelected:t}=this.props;t!==e.currentImageSelected&&t>-1&&this.setState({selectedIndex:parseInt(t,10)})}componentWillUnmount(){s.m(this.nextSlideDebounced)}renderCarousel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],l=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;const{showthumbnails:g,device:c,currentImageSelected:p,images:u,fullBleed:d,autoplayDelay:h,autoplay:b,hasCaption:m}=this.props,{selectedIndex:y,nextSlideIncremental:w}=this.state,C=p>-1?parseInt(p,10):y,E={initialSlide:parseInt(C,10)},T=u[y]&&u[y].caption||"",x="mobile"!==c?"700px":null,P=[];m&&P.push({component:n,props:{maxWidthCaption:x,captionContainerHeight:40,caption:T},position:"bottom"});const I=!d||g||m?"auto":`${l.height}px`,v=1e3*(parseFloat(h)||3.5);if(g&&"mobile"!==c&&u.length>1){const{height:e}=s.t,t={height:e,width:e},o=u.map((e=>{let{imageData:o}=e;return{url:a.g((global.Core||guac["@wsb/guac-widget-core"]).utils.generateImageServiceUrl((global._||guac.lodash).omit(o,"position")),t.height,t.height),caption:o.caption,alt:o.alt}}));P.push({component:s.T,props:{images:o,thumbWidth:70,thumbHeight:e,renderContainer:d},position:"bottom"})}i&&P.push({component:r.C,props:{visible:this.state.arrows,overrideArrowStyle:{top:0,marginTop:l.height/2+"px"},triggerNextSlide:w},position:"bottom"});const S=d?{imagesToPrefetch:10}:{};return(global.React||guac.react).createElement(o.default,t.g({key:p,dots:!1,arrows:!1,cellPadding:5,infinite:u.length>1,slideHeight:`${l.height}px`,slideWidth:"inherit",draggable:u.length>1,autoplay:b,autoplaySpeed:v,afterChange:this.updateSelectedIndex,controls:P,children:e,pauseOnHover:!d,style:{slide:{opacity:"0.3"},selectedSlide:{opacity:"1"},track:{lineHeight:0}},height:I},E,S))}updateSelectedIndex(e){this.setState({selectedIndex:e})}render(){const{device:e,images:a,renderAsThumbnail:o,size:r,fullBleed:i,showArrows:n,enableImageDimension:c}=this.props,p=(global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid,u=e===l.T&&"sm"===r?g.smallTablet:g[e],d=("mobile"===e||"xs"===r)&&o,h=a.map(((e,a)=>{let{imageData:o}=e;const l=1300,r=800,i=(global.Core||guac["@wsb/guac-widget-core"]).utils.generateImageServiceUrl({...o,additionalUrlParams:[`rs=w:${l},h:${r}`]});return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Image,t.g({imageData:{...o,enableImageDimension:c},src:i,"data-aid":t.i(a),"data-route":"",alt:o.alt||"",key:a,style:{maxWidth:"100%",position:"relative",height:"100%",objectFit:"contain"},onMouseEnter:s.m.bind(this,this.nextSlideDebounced,!0),onMouseLeave:s.m.bind(this,this.nextSlideDebounced)},t.h(a,{isImage:!0})))}));let b=null;if(h.length){const t=n&&"mobile"!==e&&h.length>1,a=d?this.renderFakeCarousel(h):this.renderCarousel(h,u,t),o=(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Group.Carousel,{onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,children:a});b=i?o:(global.React||guac.react).createElement(p,{size:1},o)}const m=i?(global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block:(global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Container;return(global.React||guac.react).createElement(m,{"data-test-radpack":"bootstrap2"},b)}});const{Bootstrap:p}=(global.Core||guac["@wsb/guac-widget-core"]).components;var u=e=>(global.React||guac.react).createElement(p.Radpack,t.g({},e,{Component:c,entry:"@widget/GALLERY/bs-gallery1-Gallery"}));const{Widget:d}=(global.Core||guac["@wsb/guac-widget-core"]).components;class h extends d{static get propTypes(){return{title:(global.PropTypes||guac["prop-types"]).string,category:(global.PropTypes||guac["prop-types"]).string,section:(global.PropTypes||guac["prop-types"]).string,showthumbnails:(global.PropTypes||guac["prop-types"]).bool,renderMode:(global.PropTypes||guac["prop-types"]).string,galleryImages:(global.PropTypes||guac["prop-types"]).array,fullBleed:(global.PropTypes||guac["prop-types"]).bool,isInternalPage:(global.PropTypes||guac["prop-types"]).bool,order:(global.PropTypes||guac["prop-types"]).number}}render(){const{title:e,category:o,section:l,showthumbnails:r,renderMode:i,galleryImages:n,fullBleed:g,isInternalPage:c,order:p}=this.props,d=s.c(n),h=i===(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes.ADD||i===(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes.DISPLAY,b=(global._||guac.lodash).merge({},this.props,{images:d,renderAsThumbnail:h}),m=g?(global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Widget.Banner:(global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Widget,y=d.reduce(((e,t)=>{let{caption:a}=t;return e||!!a}),!1),w=g?(global.Core||guac["@wsb/guac-widget-core"]).UX2.Group.Section.Banner:(global.Core||guac["@wsb/guac-widget-core"]).UX2.Group.Section;return(global.React||guac.react).createElement(m,this.props,(global.React||guac.react).createElement(w,{category:o,section:l,style:g?a.a({top:e,bottom:r&&y}):{},"data-test-radpack":"client"},e&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Container,null,(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Heading,{children:e,"data-aid":t.e.GALLERY_SECTION_TITLE_RENDERED,"data-route":"title",isInternalPage:c,order:p,groupType:"Group"})),(global.React||guac.react).createElement(u,t.g({},b,{hasCaption:y,"data-test-radpack":"publish"}))))}}const b=[t.K.title,t.K.autoplay,t.K.showthumbnails,t.K.isInternalPage,t.K.order,t.K.autoplayDelay,t.K.showArrows,t.K.fullBleed,t.K.enableImageDimension];class m extends t.j{render(){return(global.React||guac.react).createElement(h,this.props)}}t._(m,"propTypes",{...t.j.propTypes,...(global._||guac.lodash).pick(t.p,b)}),t._(m,"defaultProps",{...t.j.defaultProps,...(global._||guac.lodash).pick(t.k,b)});var y=(global.Core||guac["@wsb/guac-widget-core"]).Maniless.connect(m,i);e.Component=y,e.component="@widget/GALLERY/gallery1",e.default=y,e.hooks="@widget/GALLERY/hooks",e.id="gallery1",e.src="/home/jenkins/workspace/gdcorp-im/guac-widget-gallery/build-master/src/layouts/gallery1/index.js",e.type="GALLERY",Object.defineProperty(e,"__esModule",{value:!0})})),"undefined"!=typeof window&&(window.global=window);
//# sourceMappingURL=gallery1-55a4f9a4.js.map
